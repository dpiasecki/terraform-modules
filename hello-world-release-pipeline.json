{"source":2,"revision":36,"description":null,"createdBy":{"displayName":"Neil Peterson","url":"https://spsprodcus1.vssps.visualstudio.com/A3fc781db-c407-4f61-a987-cd0794ad923c/_apis/Identities/c8b1c7ad-1bd5-47b5-876e-375e772f00d2","_links":{"avatar":{"href":"https://nepeters-devops.visualstudio.com/_apis/GraphProfile/MemberAvatars/aad.NzZlYmU2OGYtNzY3Ni03Y2IyLWExYTItZGNiYmRhZmM5OTJm"}},"id":"c8b1c7ad-1bd5-47b5-876e-375e772f00d2","uniqueName":"nepeters@microsoft.com","imageUrl":"https://nepeters-devops.visualstudio.com/_apis/GraphProfile/MemberAvatars/aad.NzZlYmU2OGYtNzY3Ni03Y2IyLWExYTItZGNiYmRhZmM5OTJm","descriptor":"aad.NzZlYmU2OGYtNzY3Ni03Y2IyLWExYTItZGNiYmRhZmM5OTJm"},"createdOn":"2019-06-04T04:23:37.610Z","modifiedBy":{"displayName":"Neil Peterson","url":"https://spsprodcus1.vssps.visualstudio.com/A3fc781db-c407-4f61-a987-cd0794ad923c/_apis/Identities/c8b1c7ad-1bd5-47b5-876e-375e772f00d2","_links":{"avatar":{"href":"https://nepeters-devops.visualstudio.com/_apis/GraphProfile/MemberAvatars/aad.NzZlYmU2OGYtNzY3Ni03Y2IyLWExYTItZGNiYmRhZmM5OTJm"}},"id":"c8b1c7ad-1bd5-47b5-876e-375e772f00d2","uniqueName":"nepeters@microsoft.com","imageUrl":"https://nepeters-devops.visualstudio.com/_apis/GraphProfile/MemberAvatars/aad.NzZlYmU2OGYtNzY3Ni03Y2IyLWExYTItZGNiYmRhZmM5OTJm","descriptor":"aad.NzZlYmU2OGYtNzY3Ni03Y2IyLWExYTItZGNiYmRhZmM5OTJm"},"modifiedOn":"2019-06-05T19:22:40.590Z","isDeleted":false,"variables":{"ARM_ACCESS_KEY":{"value":"YyzBHzqPVbL6Ufi4XfUQKcIkDA97qAzr4s5KTV9wwbKeufBx5utP2W2Wqtkusbcl99dWuCwS0b55eBegROZ26A=="},"ARM_CLIENT_ID":{"value":"135cfd7f-dec9-4cf8-92f0-61c15b1a57e4"},"ARM_CLIENT_SECRET":{"value":"c63bae24-0a96-466e-b78a-e554ffb79ab3"},"ARM_SUBSCRIPTION_ID":{"value":"3762d87c-ddb8-425f-b2fc-29e5e859edaf"},"ARM_TENANT_ID":{"value":"72f988bf-86f1-41af-91ab-2d7cd011db47"}},"variableGroups":[],"environments":[{"id":1,"name":"Test Environment","rank":1,"owner":{"displayName":"Neil Peterson","url":"https://spsprodcus1.vssps.visualstudio.com/A3fc781db-c407-4f61-a987-cd0794ad923c/_apis/Identities/c8b1c7ad-1bd5-47b5-876e-375e772f00d2","_links":{"avatar":{"href":"https://nepeters-devops.visualstudio.com/_apis/GraphProfile/MemberAvatars/aad.NzZlYmU2OGYtNzY3Ni03Y2IyLWExYTItZGNiYmRhZmM5OTJm"}},"id":"c8b1c7ad-1bd5-47b5-876e-375e772f00d2","uniqueName":"nepeters@microsoft.com","imageUrl":"https://nepeters-devops.visualstudio.com/_apis/GraphProfile/MemberAvatars/aad.NzZlYmU2OGYtNzY3Ni03Y2IyLWExYTItZGNiYmRhZmM5OTJm","descriptor":"aad.NzZlYmU2OGYtNzY3Ni03Y2IyLWExYTItZGNiYmRhZmM5OTJm"},"variables":{},"variableGroups":[],"preDeployApprovals":{"approvals":[{"rank":1,"isAutomated":true,"isNotificationOn":false,"id":1}],"approvalOptions":{"requiredApproverCount":null,"releaseCreatorCanBeApprover":false,"autoTriggeredAndPreviousEnvironmentApprovedCanBeSkipped":false,"enforceIdentityRevalidation":false,"timeoutInMinutes":0,"executionOrder":1}},"deployStep":{"id":2},"postDeployApprovals":{"approvals":[{"rank":1,"isAutomated":true,"isNotificationOn":false,"id":3}],"approvalOptions":{"requiredApproverCount":null,"releaseCreatorCanBeApprover":false,"autoTriggeredAndPreviousEnvironmentApprovedCanBeSkipped":false,"enforceIdentityRevalidation":false,"timeoutInMinutes":0,"executionOrder":2}},"deployPhases":[{"deploymentInput":{"parallelExecution":{"parallelExecutionType":0},"agentSpecification":null,"skipArtifactsDownload":false,"artifactsDownloadInput":{"downloadInputs":[]},"queueId":407,"demands":[],"enableAccessToken":false,"timeoutInMinutes":0,"jobCancelTimeoutInMinutes":1,"condition":"succeeded()","overrideInputs":{}},"rank":1,"phaseType":1,"name":"Agent job","refName":null,"workflowTasks":[{"environment":{"ARM_ACCESS_KEY":"$(ARM_ACCESS_KEY)"},"taskId":"d9bafed4-0b18-4f58-968d-86655b4d2ce9","version":"2.*","name":"Terraform Init","refName":"","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"script":"cd _terraform-modules-CI/drop/modules/hello-world\n\nterraform init\n\nterraform workspace select hello-world-test-environment || terraform workspace new hello-world-test-environment\n\nterraform init","workingDirectory":"","failOnStderr":"false"}},{"environment":{"ARM_ACCESS_KEY":"$(ARM_ACCESS_KEY)"},"taskId":"d9bafed4-0b18-4f58-968d-86655b4d2ce9","version":"2.*","name":"Terraform Plan","refName":"","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"script":"cd _terraform-modules-CI/drop/modules/hello-world\n\nterraform plan --out plan.out -var resource_group=hello-world-test-environment -var dns-prefix=hello-world-test-environment","workingDirectory":"","failOnStderr":"false"}},{"environment":{"ARM_CLIENT_ID":"$(ARM_CLIENT_ID)","ARM_CLIENT_SECRET":"$(ARM_CLIENT_SECRET)","ARM_SUBSCRIPTION_ID":"$(ARM_SUBSCRIPTION_ID)","ARM_TENANT_ID":"$(ARM_TENANT_ID)","ARM_ACCESS_KEY":"$(ARM_ACCESS_KEY)"},"taskId":"d9bafed4-0b18-4f58-968d-86655b4d2ce9","version":"2.*","name":"Terraform Apply","refName":"","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"script":"cd _terraform-modules-CI/drop/modules/hello-world\n\nterraform apply plan.out","workingDirectory":"","failOnStderr":"false"}}]}],"environmentOptions":{"emailNotificationType":"OnlyOnFailure","emailRecipients":"release.environment.owner;release.creator","skipArtifactsDownload":false,"timeoutInMinutes":0,"enableAccessToken":false,"publishDeploymentStatus":true,"badgeEnabled":false,"autoLinkWorkItems":false,"pullRequestDeploymentEnabled":false},"demands":[],"conditions":[{"name":"ReleaseStarted","conditionType":1,"value":""}],"executionPolicy":{"concurrencyCount":1,"queueDepthCount":0},"schedules":[],"currentRelease":{"id":34,"url":"https://nepeters-devops.vsrm.visualstudio.com/5d734e8b-dd92-4291-bc6d-e15df82199e2/_apis/Release/releases/34","_links":{}},"retentionPolicy":{"daysToKeep":30,"releasesToKeep":3,"retainBuild":true},"processParameters":{},"properties":{},"preDeploymentGates":{"id":0,"gatesOptions":null,"gates":[]},"postDeploymentGates":{"id":0,"gatesOptions":null,"gates":[]},"environmentTriggers":[],"badgeUrl":"https://nepeters-devops.vsrm.visualstudio.com/_apis/public/Release/badge/5d734e8b-dd92-4291-bc6d-e15df82199e2/1/1"},{"id":2,"name":"Production Environment","rank":2,"owner":{"displayName":"Neil Peterson","url":"https://spsprodcus1.vssps.visualstudio.com/A3fc781db-c407-4f61-a987-cd0794ad923c/_apis/Identities/c8b1c7ad-1bd5-47b5-876e-375e772f00d2","_links":{"avatar":{"href":"https://nepeters-devops.visualstudio.com/_apis/GraphProfile/MemberAvatars/aad.NzZlYmU2OGYtNzY3Ni03Y2IyLWExYTItZGNiYmRhZmM5OTJm"}},"id":"c8b1c7ad-1bd5-47b5-876e-375e772f00d2","uniqueName":"nepeters@microsoft.com","imageUrl":"https://nepeters-devops.visualstudio.com/_apis/GraphProfile/MemberAvatars/aad.NzZlYmU2OGYtNzY3Ni03Y2IyLWExYTItZGNiYmRhZmM5OTJm","descriptor":"aad.NzZlYmU2OGYtNzY3Ni03Y2IyLWExYTItZGNiYmRhZmM5OTJm"},"variables":{},"variableGroups":[],"preDeployApprovals":{"approvals":[{"rank":1,"isAutomated":false,"isNotificationOn":false,"approver":{"displayName":"Neil Peterson","url":"https://spsprodcus1.vssps.visualstudio.com/A3fc781db-c407-4f61-a987-cd0794ad923c/_apis/Identities/c8b1c7ad-1bd5-47b5-876e-375e772f00d2","_links":{"avatar":{"href":"https://nepeters-devops.visualstudio.com/_apis/GraphProfile/MemberAvatars/aad.NzZlYmU2OGYtNzY3Ni03Y2IyLWExYTItZGNiYmRhZmM5OTJm"}},"id":"c8b1c7ad-1bd5-47b5-876e-375e772f00d2","uniqueName":"nepeters@microsoft.com","imageUrl":"https://nepeters-devops.visualstudio.com/_apis/GraphProfile/MemberAvatars/aad.NzZlYmU2OGYtNzY3Ni03Y2IyLWExYTItZGNiYmRhZmM5OTJm","descriptor":"aad.NzZlYmU2OGYtNzY3Ni03Y2IyLWExYTItZGNiYmRhZmM5OTJm"},"id":7}],"approvalOptions":{"requiredApproverCount":null,"releaseCreatorCanBeApprover":true,"autoTriggeredAndPreviousEnvironmentApprovedCanBeSkipped":false,"enforceIdentityRevalidation":false,"timeoutInMinutes":0,"executionOrder":1}},"deployStep":{"id":5},"postDeployApprovals":{"approvals":[{"rank":1,"isAutomated":true,"isNotificationOn":false,"id":6}],"approvalOptions":{"requiredApproverCount":null,"releaseCreatorCanBeApprover":false,"autoTriggeredAndPreviousEnvironmentApprovedCanBeSkipped":false,"enforceIdentityRevalidation":false,"timeoutInMinutes":0,"executionOrder":2}},"deployPhases":[{"deploymentInput":{"parallelExecution":{"parallelExecutionType":0},"agentSpecification":null,"skipArtifactsDownload":false,"artifactsDownloadInput":{"downloadInputs":[]},"queueId":407,"demands":[],"enableAccessToken":false,"timeoutInMinutes":0,"jobCancelTimeoutInMinutes":1,"condition":"succeeded()","overrideInputs":{}},"rank":1,"phaseType":1,"name":"Agent job","refName":null,"workflowTasks":[{"environment":{"ARM_ACCESS_KEY":"$(ARM_ACCESS_KEY)"},"taskId":"d9bafed4-0b18-4f58-968d-86655b4d2ce9","version":"2.*","name":"Terraform Init","refName":"","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"script":"cd _terraform-modules-CI/drop/modules/hello-world\n\nterraform init\n\nterraform workspace select hello-world-production-environment || terraform workspace new hello-world-production-environment\n\nterraform init","workingDirectory":"","failOnStderr":"false"}},{"environment":{"ARM_ACCESS_KEY":"$(ARM_ACCESS_KEY)"},"taskId":"d9bafed4-0b18-4f58-968d-86655b4d2ce9","version":"2.*","name":"Terraform Plan","refName":"","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"script":"cd _terraform-modules-CI/drop/modules/hello-world\n\nterraform plan --out plan.out -var resource_group=hello-world-production-environment -var dns-prefix=hello-world-production-environment","workingDirectory":"","failOnStderr":"false"}},{"environment":{"ARM_CLIENT_ID":"$(ARM_CLIENT_ID)","ARM_CLIENT_SECRET":"$(ARM_CLIENT_SECRET)","ARM_SUBSCRIPTION_ID":"$(ARM_SUBSCRIPTION_ID)","ARM_TENANT_ID":"$(ARM_TENANT_ID)","ARM_ACCESS_KEY":"$(ARM_ACCESS_KEY)"},"taskId":"d9bafed4-0b18-4f58-968d-86655b4d2ce9","version":"2.*","name":"Terraform Apply","refName":"","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"script":"cd _terraform-modules-CI/drop/modules/hello-world\n\nterraform apply plan.out","workingDirectory":"","failOnStderr":"false"}}]}],"environmentOptions":{"emailNotificationType":"OnlyOnFailure","emailRecipients":"release.environment.owner;release.creator","skipArtifactsDownload":false,"timeoutInMinutes":0,"enableAccessToken":false,"publishDeploymentStatus":true,"badgeEnabled":false,"autoLinkWorkItems":false,"pullRequestDeploymentEnabled":false},"demands":[],"conditions":[{"name":"Test Environment","conditionType":2,"value":"4"}],"executionPolicy":{"concurrencyCount":1,"queueDepthCount":0},"schedules":[],"currentRelease":{"id":34,"url":"https://nepeters-devops.vsrm.visualstudio.com/5d734e8b-dd92-4291-bc6d-e15df82199e2/_apis/Release/releases/34","_links":{}},"retentionPolicy":{"daysToKeep":30,"releasesToKeep":3,"retainBuild":true},"processParameters":{},"properties":{},"preDeploymentGates":{"id":0,"gatesOptions":null,"gates":[]},"postDeploymentGates":{"id":0,"gatesOptions":null,"gates":[]},"environmentTriggers":[],"badgeUrl":"https://nepeters-devops.vsrm.visualstudio.com/_apis/public/Release/badge/5d734e8b-dd92-4291-bc6d-e15df82199e2/1/2"}],"artifacts":[{"sourceId":"5d734e8b-dd92-4291-bc6d-e15df82199e2:53","type":"Build","alias":"_terraform-modules-CI","definitionReference":{"artifactSourceDefinitionUrl":{"id":"https://nepeters-devops.visualstudio.com/_permalink/_build/index?collectionId=8f7f6fd9-b516-4ecf-8a50-ea1cd5b32a0d&projectId=5d734e8b-dd92-4291-bc6d-e15df82199e2&definitionId=53","name":""},"defaultVersionBranch":{"id":"","name":""},"defaultVersionSpecific":{"id":"","name":""},"defaultVersionTags":{"id":"","name":""},"defaultVersionType":{"id":"latestType","name":"Latest"},"definition":{"id":"53","name":"terraform-modules-CI"},"definitions":{"id":"","name":""},"IsMultiDefinitionType":{"id":"False","name":"False"},"project":{"id":"5d734e8b-dd92-4291-bc6d-e15df82199e2","name":"terraform-modules"},"repository":{"id":"","name":""}},"isPrimary":true,"isRetained":false}],"triggers":[],"releaseNameFormat":"Release-$(rev:r)","tags":[],"pipelineProcess":{"type":1},"properties":{"DefinitionCreationSource":{"$type":"System.String","$value":"ReleaseNew"}},"id":1,"name":"New release pipeline","path":"\\","projectReference":null,"url":"https://nepeters-devops.vsrm.visualstudio.com/5d734e8b-dd92-4291-bc6d-e15df82199e2/_apis/Release/definitions/1","_links":{"self":{"href":"https://nepeters-devops.vsrm.visualstudio.com/5d734e8b-dd92-4291-bc6d-e15df82199e2/_apis/Release/definitions/1"},"web":{"href":"https://nepeters-devops.visualstudio.com/5d734e8b-dd92-4291-bc6d-e15df82199e2/_release?definitionId=1"}}}